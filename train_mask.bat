@echo off
chcp 65001 >nul
title Brotato AI - Mask Mode

set BROTATO_OBS_MASK_MODE=true
set BROTATO_OBS_SIZE=160
set BROTATO_OBS_STACK=4

set BROTATO_WINDOW_TITLE=Brotato
set BROTATO_EXE_NAME=Brotato.exe
set BROTATO_WINDOW_W=1920
set BROTATO_WINDOW_H=1080
set BROTATO_FORCE_WINDOW_RESIZE=false

set BROTATO_DEBUG_WINDOWS=true
set BROTATO_DEBUG_WINDOWS_SET=core4
set BROTATO_DEBUG_RENDER_FPS=12

set BROTATO_SHOP_POINTS=210,576;560,577;922,576;1284,573
set BROTATO_SHOP_CARD_RECTS=25,147,376,549;391,154,736,537;747,145,1095,553;1113,145,1455,542
set BROTATO_SHOP_REFRESH_RECT=1158,25,1459,108
set BROTATO_SHOP_GO_RECT=1471,828,1884,897
set BROTATO_SHOP_BUY_OFFSET_Y=0
set BROTATO_SHOP_POLICY_CARD_W=350
set BROTATO_SHOP_POLICY_CARD_H=430
set BROTATO_SHOP_POLICY_CARD_DOWN=20

set BROTATO_UPGRADE_SELECT_POINTS=211,662;583,665;948,663;1318,663
set BROTATO_UPGRADE_CARD_W=340
set BROTATO_UPGRADE_CARD_H=120
set BROTATO_UPGRADE_REFRESH_RECT=520,761,1007,826
set BROTATO_UPGRADE_PRESS_ENTER_CONFIRM=false

set BROTATO_PPO_LR=3e-4
set BROTATO_PPO_ENT_COEF=0.02
set BROTATO_PPO_N_STEPS=4096
set BROTATO_PPO_BATCH_SIZE=512
set BROTATO_TOTAL_TIMESTEPS=1000000
set BROTATO_RESET_NUM_TIMESTEPS=true
set BROTATO_RESUME_MODEL=auto

if not defined ROBOFLOW_API_KEY (
    echo [warn] ROBOFLOW_API_KEY is not set. Roboflow detector will be skipped.
)

cd /d "%~dp0"
call conda activate bota_ai 2>nul || echo [warn] conda activate skipped

python -c "import inference_sdk" 2>nul || (
    echo [setup] Installing inference-sdk...
    pip install inference-sdk
)

python v1/train.py
pause
